<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Booking berhasil - Klinik Sehat Pratama">
  <meta name="theme-color" content="#00CED1">

  <title>Booking Berhasil - Klinik Sehat Pratama</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%2300CED1' width='100' height='100' rx='20'/%3E%3Ctext x='50' y='70' text-anchor='middle' font-size='60' fill='white' font-weight='bold'%3EK%3C/text%3E%3C/svg%3E">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">

  <style>
    .confirmation-container {
      max-width: 600px;
      margin: 0 auto;
      padding: var(--spacing-3xl) var(--spacing-lg);
      text-align: center;
    }

    .success-checkmark {
      width: 120px;
      height: 120px;
      margin: 0 auto var(--spacing-xl);
      border-radius: var(--radius-full);
      background: var(--success-50);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: checkmarkAppear 500ms ease-out;
    }

    @keyframes checkmarkAppear {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .success-checkmark svg {
      width: 64px;
      height: 64px;
      color: var(--success-500);
    }

    .confirmation-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: var(--spacing-base);
    }

    .confirmation-subtitle {
      font-size: 16px;
      color: var(--neutral-600);
      margin-bottom: var(--spacing-3xl);
    }

    .booking-number-card {
      background: linear-gradient(135deg, rgba(224, 247, 247, 0.5) 0%, rgba(255, 255, 255, 1) 100%);
      border: 2px solid var(--primary-500);
      border-radius: var(--radius-lg);
      padding: var(--spacing-xl);
      box-shadow: var(--shadow-md);
      margin-bottom: var(--spacing-xl);
    }

    .booking-number-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: var(--neutral-500);
      margin-bottom: var(--spacing-sm);
    }

    .booking-number-value {
      font-family: 'SF Mono', 'Roboto Mono', monospace;
      font-size: 28px;
      font-weight: 700;
      color: var(--primary-500);
      letter-spacing: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-base);
    }

    .details-card {
      background: white;
      border: 1px solid var(--neutral-100);
      border-radius: var(--radius-lg);
      padding: var(--spacing-xl);
      box-shadow: var(--shadow-sm);
      margin-bottom: var(--spacing-xl);
      text-align: left;
    }

    .detail-row {
      display: flex;
      align-items: flex-start;
      gap: var(--spacing-base);
      padding: var(--spacing-base) 0;
    }

    .detail-row:not(:last-child) {
      border-bottom: 1px solid var(--neutral-100);
    }

    .detail-icon {
      width: 24px;
      height: 24px;
      color: var(--primary-500);
      flex-shrink: 0;
    }

    .detail-content {
      flex: 1;
    }

    .detail-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      color: var(--neutral-500);
      margin-bottom: 4px;
    }

    .detail-value {
      font-size: 15px;
      font-weight: 600;
      color: var(--neutral-900);
    }

    .status-badge {
      display: inline-block;
      padding: 6px 14px;
      border-radius: var(--radius-full);
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .status-paid {
      background: var(--success-50);
      color: var(--success-700);
      border: 1px solid var(--success-500);
    }

    .status-confirmed {
      background: rgba(0, 206, 209, 0.1);
      color: var(--primary-700);
      border: 1px solid var(--primary-500);
    }

    .reminder-info {
      background: var(--info-50);
      border-left: 4px solid var(--info-500);
      padding: var(--spacing-base);
      border-radius: var(--radius-md);
      display: flex;
      align-items: flex-start;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-xl);
      text-align: left;
    }

    .reminder-info svg {
      color: var(--info-500);
      flex-shrink: 0;
      margin-top: 2px;
    }

    .reminder-info p {
      font-size: 14px;
      color: var(--neutral-700);
      line-height: 1.6;
    }

    .action-buttons {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-base);
    }

    @media (min-width: 768px) {
      .action-buttons {
        flex-direction: row;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content" style="justify-content: center;">
      <div style="display: flex; align-items: center;">
        <svg width="36" height="36" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <rect fill="#00CED1" width="100" height="100" rx="20"/>
          <text x="50" y="70" text-anchor="middle" font-size="60" fill="white" font-weight="bold">K</text>
        </svg>
        <span class="clinic-name">Klinik Sehat Pratama</span>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <div class="confirmation-container">
      <!-- Success Checkmark -->
      <div class="success-checkmark">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
      </div>

      <h1 class="confirmation-title">Booking Berhasil!</h1>
      <p class="confirmation-subtitle">Janji temu Anda telah dikonfirmasi</p>

      <!-- Booking Number Card -->
      <div class="booking-number-card">
        <div class="booking-number-label">Nomor Booking</div>
        <div class="booking-number-value">
          <span id="booking-number">-</span>
          <button class="btn-copy" onclick="copyBookingNumber()" title="Salin nomor booking">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
          </button>
        </div>
      </div>

      <!-- Booking Details Card -->
      <div class="details-card">
        <div class="detail-row">
          <svg class="detail-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <div class="detail-content">
            <div class="detail-label">Dokter</div>
            <div class="detail-value" id="doctor-name">-</div>
          </div>
        </div>

        <div class="detail-row">
          <svg class="detail-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <div class="detail-content">
            <div class="detail-label">Tanggal</div>
            <div class="detail-value" id="booking-date">-</div>
          </div>
        </div>

        <div class="detail-row">
          <svg class="detail-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <div class="detail-content">
            <div class="detail-label">Waktu</div>
            <div class="detail-value" id="booking-time">-</div>
          </div>
        </div>

        <div class="detail-row">
          <svg class="detail-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
          </svg>
          <div class="detail-content">
            <div class="detail-label">Pasien</div>
            <div class="detail-value" id="patient-name">-</div>
          </div>
        </div>

        <div class="detail-row">
          <svg class="detail-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <div class="detail-content">
            <div class="detail-label">Status</div>
            <div>
              <span class="status-badge" id="booking-status">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Reminder Info -->
      <div class="reminder-info">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        <div>
          <p><strong>Pengingat Otomatis</strong></p>
          <p>Anda akan menerima pengingat via WhatsApp H-1 dan H-0 sebelum janji temu.</p>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button class="btn-secondary" onclick="downloadCalendar()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Tambah ke Kalender
        </button>
        <button class="btn-ghost" onclick="window.location.href='index.html'">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          Kembali ke Beranda
        </button>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer style="border-top: 1px solid var(--neutral-200); padding: var(--spacing-2xl) 0; margin-top: var(--spacing-4xl); background: white;">
    <div class="container">
      <div style="display: grid; gap: var(--spacing-xl); grid-template-columns: 1fr;">
        <div style="text-align: center;">
          <h3 style="font-size: 16px; font-weight: 600; color: var(--neutral-900); margin-bottom: var(--spacing-base);">Klinik Sehat Pratama</h3>
          <p style="font-size: 14px; color: var(--neutral-600); line-height: 1.6;">
            Jl. Merdeka No. 123, Jakarta Pusat<br>
            Telepon: 021-12345678<br>
            Email: info@kliniksehat.com
          </p>
        </div>
      </div>
      <div style="margin-top: var(--spacing-2xl); padding-top: var(--spacing-lg); border-top: 1px solid var(--neutral-200); text-align: center;">
        <p style="font-size: 12px; color: var(--neutral-500);">
          &copy; 2025 Klinik Sehat Pratama. All rights reserved.
        </p>
      </div>
    </div>
  </footer>

  <!-- Toast Container -->
  <div id="toast-container"></div>

  <!-- Scripts -->
  <script src="js/data.js"></script>
  <script src="js/components.js"></script>
  <script>
    // Load booking data from session storage
    function loadBookingData() {
      const savedState = sessionStorage.getItem('bookingState');
      if (!savedState) {
        window.location.href = 'index.html';
        return;
      }

      const state = JSON.parse(savedState);

      // Trigger confetti animation
      triggerConfetti();

      // Display booking number
      document.getElementById('booking-number').textContent = state.bookingNumber || generateBookingNumber();

      // Display doctor
      document.getElementById('doctor-name').textContent = state.selectedDoctor?.name || '-';

      // Display date
      document.getElementById('booking-date').textContent = formatDate(state.selectedDate);

      // Display time
      const timeElement = document.getElementById('booking-time');
      if (state.selectedBookingType === 'fast_track' && state.selectedTime) {
        timeElement.textContent = state.selectedTime + ' WIB';
      } else {
        timeElement.textContent = 'Reservasi (datang sebelum 12:00 WIB)';
      }

      // Display patient name
      document.getElementById('patient-name').textContent = state.patientInfo.name || '-';

      // Display status
      const statusElement = document.getElementById('booking-status');
      if (state.selectedBookingType === 'fast_track') {
        statusElement.textContent = 'Paid';
        statusElement.className = 'status-badge status-paid';
      } else {
        statusElement.textContent = 'Confirmed';
        statusElement.className = 'status-badge status-confirmed';
      }
    }

    // Copy booking number
    function copyBookingNumber() {
      const bookingNumber = document.getElementById('booking-number').textContent;
      navigator.clipboard.writeText(bookingNumber).then(() => {
        Toast.show('Nomor booking tersalin!', 'success', 2000);
      });
    }

    // Download calendar file
    function downloadCalendar() {
      const savedState = sessionStorage.getItem('bookingState');
      if (!savedState) return;

      const state = JSON.parse(savedState);

      // Create .ics file content
      const icsContent = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Klinik Sehat Pratama//Booking//EN
BEGIN:VEVENT
UID:${state.bookingNumber}@kliniksehat.com
DTSTAMP:${new Date().toISOString().replace(/[-:]/g, '').split('.')[0]}Z
DTSTART:${state.selectedDate.replace(/-/g, '')}T${state.selectedTime ? state.selectedTime.replace(':', '') + '00' : '090000'}
DTEND:${state.selectedDate.replace(/-/g, '')}T${state.selectedTime ? state.selectedTime.replace(':', '') + '00' : '100000'}
SUMMARY:Janji Temu dengan ${state.selectedDoctor?.name}
DESCRIPTION:Booking ${state.selectedBookingType === 'fast_track' ? 'Fast-Track' : 'Reguler'}\\nNomor: ${state.bookingNumber}
LOCATION:Klinik Sehat Pratama, Jl. Merdeka No. 123, Jakarta Pusat
END:VEVENT
END:VCALENDAR`;

      // Create blob and download
      const blob = new Blob([icsContent], { type: 'text/calendar' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `booking-${state.bookingNumber}.ics`;
      a.click();
      URL.revokeObjectURL(url);

      Toast.show('File kalender berhasil diunduh!', 'success', 3000);
    }

    // Initialize on page load
    document.addEventListener('DOMContentLoaded', loadBookingData);
  </script>
</body>
</html>
